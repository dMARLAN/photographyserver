I need you to create a design doc to do the following
<task>
$ARGUMENTS
</task>

Use the following steps:

- Step 1:
    - Explore the code base and to understand how this task will fit into the existing code.
    - Make heavy use of subagents (Agent tool) here and tell them to ultrathink as hard as possible on their subtask.
    - Create TODOs to track what you understand and what you still need to learn

- Step 2:
    - Ultrathink as hard as you can on the ideal plan to implement this feature in a way that would pass production grade code review
    - Consider what refactors (if any) may be required keeping in mind we want to avoid code debt in any planned implementation
    - Backwards compatibility is never a requirement
    - Save your plan as a .md file
